<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>
      How to quickly deploy a VS Code extension on Eclipse Che | Eclipse Che
      Blog
    </title>
    <meta name="generator" content="Jekyll v4.2.2" />
    <meta
      property="og:title"
      content="How to quickly deploy a VS Code extension on Eclipse Che"
    />
    <meta name="author" content="Florent Benoit" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="Introduction" />
    <meta property="og:description" content="Introduction" />
    <link
      rel="canonical"
      href="https://che.eclipseprojects.io/2020/07/24/@florent.benoit-how-to-quickly-deploy-a-vs-code-extension-on-eclipse-che.html"
    />
    <meta
      property="og:url"
      content="https://che.eclipseprojects.io/2020/07/24/@florent.benoit-how-to-quickly-deploy-a-vs-code-extension-on-eclipse-che.html"
    />
    <meta property="og:site_name" content="Eclipse Che Blog" />
    <meta property="og:type" content="article" />
    <meta
      property="article:published_time"
      content="2020-07-24T00:00:00+00:00"
    />
    <meta name="twitter:card" content="summary" />
    <meta
      property="twitter:title"
      content="How to quickly deploy a VS Code extension on Eclipse Che"
    />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": { "@type": "Person", "name": "Florent Benoit" },
        "dateModified": "2020-07-24T00:00:00+00:00",
        "datePublished": "2020-07-24T00:00:00+00:00",
        "description": "Introduction",
        "headline": "How to quickly deploy a VS Code extension on Eclipse Che",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://che.eclipseprojects.io/2020/07/24/@florent.benoit-how-to-quickly-deploy-a-vs-code-extension-on-eclipse-che.html"
        },
        "url": "https://che.eclipseprojects.io/2020/07/24/@florent.benoit-how-to-quickly-deploy-a-vs-code-extension-on-eclipse-che.html"
      }
    </script>
    <!-- End Jekyll SEO tag -->
    <link rel="stylesheet" href="/assets/main.css" />
    <link
      type="application/atom+xml"
      rel="alternate"
      href="https://che.eclipseprojects.io/feed.xml"
      title="Eclipse Che Blog"
    />
    <script>
      if (
        !(
          window.doNotTrack === "1" ||
          navigator.doNotTrack === "1" ||
          navigator.doNotTrack === "yes" ||
          navigator.msDoNotTrack === "1"
        )
      ) {
        (function (i, s, o, g, r, a, m) {
          i["GoogleAnalyticsObject"] = r;
          (i[r] =
            i[r] ||
            function () {
              (i[r].q = i[r].q || []).push(arguments);
            }),
            (i[r].l = 1 * new Date());
          (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m);
        })(
          window,
          document,
          "script",
          "https://www.google-analytics.com/analytics.js",
          "ga"
        );

        ga("create", "UA-215676970-1", "auto");
        ga("send", "pageview");
      }
    </script>
  </head>
  <body>
    <header class="site-header" role="banner">
      <div class="wrapper">
        <a class="site-title" rel="author" href="/">Eclipse Che Blog</a>
        <nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path
                  d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"
                />
              </svg>
            </span>
          </label>

          <div class="trigger"></div>
        </nav>
      </div>
    </header>
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article
          class="post h-entry"
          itemscope
          itemtype="http://schema.org/BlogPosting"
        >
          <header class="post-header">
            <h1 class="post-title p-name" itemprop="name headline">
              How to quickly deploy a VS Code extension on Eclipse Che
            </h1>
            <p class="post-meta">
              <time
                class="dt-published"
                datetime="2020-07-24T00:00:00+00:00"
                itemprop="datePublished"
                >Jul 24, 2020 </time
              >•
              <span
                itemprop="author"
                itemscope
                itemtype="http://schema.org/Person"
                ><span class="p-author h-card" itemprop="name"
                  >Florent Benoit</span
                ></span
              >
            </p>
          </header>

          <div class="post-content e-content" itemprop="articleBody">
            <h4 id="introduction">Introduction</h4>

            <p>Eclipse Che is supporting VS Code extensions in its IDE.</p>

            <p>
              Each workspace can have its own set of plug-ins. This definition
              of plug-ins is stored inside a
              <code class="language-plaintext highlighter-rouge"
                >devfile.yaml</code
              >file containing as well the list of projects to clone.
            </p>

            <p>
              From the dashboard, there is a list of plug-ins that can be
              enabled on a given workspace.
            </p>

            <p>
              <img
                src="https://cdn-images-1.medium.com/max/800/1*AljynvaP6VGvLx1hr4UdwA.png"
                alt=""
              />
            </p>

            <p>
              When a plug-in is enabled, a new entry is added in the
              <code class="language-plaintext highlighter-rouge"
                >devfile.yaml</code
              >
              file.
            </p>

            <p>
              For example, enabling AsciiDoc plug-in is adding the following
              snippet in my devfile.
            </p>

            <p>
              <img
                src="https://cdn-images-1.medium.com/max/800/1*JDXduFwsoaxMokw49VxXpA.png"
                alt=""
              />
            </p>

            <p>
              It’s easy but what if the plug-in that I want to try is not in the
              default Eclipse Che plug-in registry ?
            </p>

            <p>
              Here come multiple ideas. One of them is to fork the current
              plug-in-registry repository, rebuild the docker image, deploy it
              and use this registry. It’s very powerful for ‘in-house’
              use-cases, etc but it might be a big effort at first.
            </p>

            <h4 id="setup-configuration">Setup configuration</h4>

            <p>
              Let’s try to make it very simple by just using Github and its
              <a href="https://gist.github.com/">gist</a> service.
            </p>

            <p>
              Go on
              <a href="https://gist.github.com/">https://gist.github.com/</a>
              and create a README.md file saying for example that :
              <code class="language-plaintext highlighter-rouge"
                >Try Bracket Pair Colorizer extension in Eclipse Che</code
              >
            </p>

            <p>
              It’s because I want to try
              <a
                href="https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer"
                >https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer</a
              >
              with its 3M of downloads !
            </p>

            <p>
              <img
                src="https://cdn-images-1.medium.com/max/800/1*K9B6-Ivap24YRGPvlEXYkg.png"
                alt=""
              />
              <img
                src="https://cdn-images-1.medium.com/max/800/1*o9fowXf0ylqqqSZacNRa0w.png"
                alt=""
              />
            </p>

            <p>
              And click on
              <code class="language-plaintext highlighter-rouge"
                >Create secret gist</code
              >
              button
            </p>

            <p>
              <img
                src="https://cdn-images-1.medium.com/max/800/1*p2f_G6UbZ_MXvjY2NtbWdQ.png"
                alt=""
              />
            </p>

            <p>
              You might not know, but behind a gist, there is a git repository.
              Let’s clone this repository by using the URL from the navbar.
            </p>

            <p>Git clone command will look like:</p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span>git clone https://gist.github.com/&lt;github-username&gt;/&lt;very-long-id&gt;
</code></pre>
              </div>
            </div>

            <p>In my case it was</p>
            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code>git clone https://gist.github.com/benoitf/85c60c8c439177ac50141d527729b9d9                                                                                                                                                
Cloning into <span class="s1">'85c60c8c439177ac50141d527729b9d9'</span>...  
remote: Enumerating objects: 3, <span class="k">done</span><span class="nb">.</span>  
remote: Counting objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>  
remote: Total 3 <span class="o">(</span>delta 0<span class="o">)</span>, reused 0 <span class="o">(</span>delta 0<span class="o">)</span>, pack-reused 0  
Unpacking objects: 100% <span class="o">(</span>3/3<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
</code></pre>
              </div>
            </div>

            <p>then we enter into this cloned directory</p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span><span class="nb">cd </span>85c60c8c439177ac50141d527729b9d9
</code></pre>
              </div>
            </div>

            <h4 id="create-the-devfile-and-plug-ins-definition">
              Create the devfile and plug-ins definition
            </h4>

            <p>
              First, download the plug-in from the VS Code marketplace
              <a
                href="https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer"
                >https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer</a
              >
              or from its github page
              <a href="https://github.com/CoenraadS/BracketPair/releases"
                >https://github.com/CoenraadS/BracketPair/releases</a
              >
              and store the file in the cloned directory
            </p>

            <p>
              Then, we need to add a definition of this plug-in through a yaml
              file.
            </p>

            <p>
              Let’s create this file in the cloned directory
              <script src="https://gist.github.com/benoitf/04e840a453e46f243c07c2254d68ea0a.js"></script>
            </p>

            <p>Two remarks there:</p>

            <ul>
              <li>
                This extension seems to only require nodejs runtime so in the
                yaml definition I didn’t specified a custom runtime image.
              </li>
              <li>
                I’m using in URL to later compute this link to avoid to search
                the public URL of the file for now.
              </li>
            </ul>

            <p>
              note: in the
              <code class="language-plaintext highlighter-rouge">spec</code>
              section, we can specify a custom runtime image, memory limit and
              some extra volumes, but for the use-case of this simple extension,
              it was not required.
            </p>

            <div class="language-yaml highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="na">spec</span><span class="pi">:</span>  
  <span class="na">containers</span><span class="pi">:</span>  
    <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">quay.io/eclipse/che-sidecar-java:8-0cfbacb"</span>  
      <span class="na">name</span><span class="pi">:</span> <span class="s">vscode-java</span>  
      <span class="na">memoryLimit</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1500Mi"</span>  
      <span class="na">volumes</span><span class="pi">:</span>  
      <span class="pi">-</span> <span class="na">mountPath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/home/theia/.m2"</span>  
        <span class="na">name</span><span class="pi">:</span> <span class="s">m2</span>
</code></pre>
              </div>
            </div>

            <p>
              So,
              <code class="language-plaintext highlighter-rouge"
                >plugin.vsix</code
              >file is there,
              <code class="language-plaintext highlighter-rouge"
                >plugin.yaml</code
              >
              file is there and we only need our workspace definition:
              <code class="language-plaintext highlighter-rouge"
                >devfile.yaml</code
              >
            </p>

            <script src="https://gist.github.com/benoitf/2bce0908836d8dce9171016eafb334f9.js"></script>

            <p>
              You could have taken any other devfile definition., the only
              important information from this devfile are the lines
            </p>

            <div class="language-yaml highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="na">components</span><span class="pi">:</span>  
  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">chePlugin</span>  
    <span class="na">reference</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/plugin.yaml"</span>
</code></pre>
              </div>
            </div>

            <p>
              It means that we’ll add a custom plug-in using an external
              reference vs just an id pointing to a definition inside the
              default plug-in registry.
            </p>

            <p>To sum up, we have 4 files in the current git directory:</p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-la</span>  
.git  
CoenraadS.bracket-pair-colorizer-1.0.61.vsix  
README.md  
devfile.yaml  
plugin.yaml
</code></pre>
              </div>
            </div>

            <p>
              We will need to commit the files to our repository, but before, we
              will add a pre-commit hook to update
              <code class="language-plaintext highlighter-rouge"
                >{{ REPOSITORY }}</code
              >
              variable to the public external raw gist link.
            </p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="c"># download this script  </span>
<span class="nv">$ </span>curl <span class="nt">-s</span> https://gist.githubusercontent.com/benoitf/e1dd101a6ae157e7e498453dbf683137/raw/2c332278c5a8018b6669da661bbdc6fa10dfb872/pre-commit.sh <span class="o">&gt;</span> .git/hooks/pre-commit

<span class="c"># make it executable  </span>
<span class="nv">$ </span><span class="nb">chmod </span>u+x .git/hooks/pre-commit
</code></pre>
              </div>
            </div>

            <p>Pre-commit hook is in place, it’s time to commit our files</p>
            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span>git add <span class="se">\*</span>
</code></pre>
              </div>
            </div>

            <p>
              <img
                src="https://cdn-images-1.medium.com/max/800/1*0FbflRWYdDICdYwAfPYRGA.png"
                alt=""
              />
            </p>

            <p>…commit the files…</p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Initial Commit for the test of our extension"</span> <span class="nb">.</span>                                                                                                                      

<span class="o">[</span>master 98dd370] Initial Commit <span class="k">for </span>the <span class="nb">test </span>of our extension  
 3 files changed, 61 insertions<span class="o">(</span>+<span class="o">)</span>  
 create mode 100644 CoenraadS.bracket-pair-colorizer-1.0.61.vsix  
 create mode 100644 devfile.yaml  
 create mode 100644 plugin.yaml
</code></pre>
              </div>
            </div>

            <p>… and push the files to the main branch</p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span>git push origin 
</code></pre>
              </div>
            </div>

            <p>
              By going back to the gist website, we can see that all links have
              been updated with the correct public URL.
            </p>

            <p>
              <img
                src="https://cdn-images-1.medium.com/max/800/1*jUjdaNPgGRmZSeEe44fqYg.png"
                alt=""
              />
            </p>

            <p>
              Now it’s time to experiment our devfile by entering the command to
              check that online !
            </p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span>open <span class="s2">"https://che.openshift.io/f/?url=</span><span class="si">$(</span>git config <span class="nt">--get</span> remote.origin.url<span class="si">)</span><span class="s2">/raw/devfile.yaml"</span>
</code></pre>
              </div>
            </div>

            <p>or if you only want the link</p>

            <div class="language-bash highlighter-rouge">
              <div class="highlight">
                <pre
                  class="highlight"
                ><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"https://che.openshift.io/f/?url=</span><span class="si">$(</span>git config <span class="nt">--get</span> remote.origin.url<span class="si">)</span><span class="s2">/raw/devfile.yaml"</span>
</code></pre>
              </div>
            </div>

            <p>I can now code with nice brackets :-)</p>

            <p>
              <img
                src="https://cdn-images-1.medium.com/max/800/1*T0IcGezki-m-bHM8DB3V7A.gif"
                alt=""
              />
            </p>
          </div>
          <a
            class="u-url"
            href="/2020/07/24/@florent.benoit-how-to-quickly-deploy-a-vs-code-extension-on-eclipse-che.html"
            hidden
          ></a>
        </article>
      </div>
    </main>
    <footer class="site-footer h-card">
      <data class="u-url" href="/"></data>

      <div class="wrapper">
        <h2 class="footer-heading">Eclipse Che Blog</h2>

        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <ul class="contact-list">
              <li class="p-name">Eclipse Che Blog</li>
              <li>
                <a class="u-email" href="mailto:che-dev@eclipse.org"
                  >che-dev@eclipse.org</a
                >
              </li>
            </ul>
          </div>

          <div class="footer-col footer-col-2">
            <ul class="social-media-list">
              <li>
                <a href="https://github.com/eclipse-che"
                  ><svg class="svg-icon">
                    <use
                      xlink:href="/assets/minima-social-icons.svg#github"
                    ></use>
                  </svg>
                  <span class="username">eclipse-che</span></a
                >
              </li>
              <li>
                <a href="https://www.twitter.com/eclipse_che"
                  ><svg class="svg-icon">
                    <use
                      xlink:href="/assets/minima-social-icons.svg#twitter"
                    ></use>
                  </svg>
                  <span class="username">eclipse_che</span></a
                >
              </li>
            </ul>
          </div>

          <div class="footer-col footer-col-3">
            <p>Eclipse Che runs IDEs in Kubernetes.</p>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
