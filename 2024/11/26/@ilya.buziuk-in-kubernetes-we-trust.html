<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>In Kubernetes We Trust | Eclipse Che Blog</title>
    <meta name="generator" content="Jekyll v4.2.2" />
    <meta property="og:title" content="In Kubernetes We Trust" />
    <meta name="author" content="Ilya Buziuk" />
    <meta property="og:locale" content="en_US" />
    <meta
      name="description"
      content="Building an application platform for developers on Kubernetes"
    />
    <meta
      property="og:description"
      content="Building an application platform for developers on Kubernetes"
    />
    <link
      rel="canonical"
      href="https://che.eclipseprojects.io/2024/11/26/@ilya.buziuk-in-kubernetes-we-trust.html"
    />
    <meta
      property="og:url"
      content="https://che.eclipseprojects.io/2024/11/26/@ilya.buziuk-in-kubernetes-we-trust.html"
    />
    <meta property="og:site_name" content="Eclipse Che Blog" />
    <meta property="og:type" content="article" />
    <meta
      property="article:published_time"
      content="2024-11-26T00:00:00+00:00"
    />
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="In Kubernetes We Trust" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": { "@type": "Person", "name": "Ilya Buziuk" },
        "dateModified": "2024-11-26T00:00:00+00:00",
        "datePublished": "2024-11-26T00:00:00+00:00",
        "description": "Building an application platform for developers on Kubernetes",
        "headline": "In Kubernetes We Trust",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://che.eclipseprojects.io/2024/11/26/@ilya.buziuk-in-kubernetes-we-trust.html"
        },
        "url": "https://che.eclipseprojects.io/2024/11/26/@ilya.buziuk-in-kubernetes-we-trust.html"
      }
    </script>
    <!-- End Jekyll SEO tag -->
    <link rel="stylesheet" href="/assets/main.css" />
    <link
      type="application/atom+xml"
      rel="alternate"
      href="https://che.eclipseprojects.io/feed.xml"
      title="Eclipse Che Blog"
    />
    <script>
      if (
        !(
          window.doNotTrack === "1" ||
          navigator.doNotTrack === "1" ||
          navigator.doNotTrack === "yes" ||
          navigator.msDoNotTrack === "1"
        )
      ) {
        (function (i, s, o, g, r, a, m) {
          i["GoogleAnalyticsObject"] = r;
          (i[r] =
            i[r] ||
            function () {
              (i[r].q = i[r].q || []).push(arguments);
            }),
            (i[r].l = 1 * new Date());
          (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m);
        })(
          window,
          document,
          "script",
          "https://www.google-analytics.com/analytics.js",
          "ga"
        );

        ga("create", "UA-215676970-1", "auto");
        ga("send", "pageview");
      }
    </script>
  </head>
  <body>
    <header class="site-header" role="banner">
      <div class="wrapper">
        <a class="site-title" rel="author" href="/">Eclipse Che Blog</a>
        <nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path
                  d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"
                />
              </svg>
            </span>
          </label>

          <div class="trigger"></div>
        </nav>
      </div>
    </header>
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article
          class="post h-entry"
          itemscope
          itemtype="http://schema.org/BlogPosting"
        >
          <header class="post-header">
            <h1 class="post-title p-name" itemprop="name headline">
              In Kubernetes We Trust
            </h1>
            <p class="post-meta">
              <time
                class="dt-published"
                datetime="2024-11-26T00:00:00+00:00"
                itemprop="datePublished"
                >Nov 26, 2024 </time
              >•
              <span
                itemprop="author"
                itemscope
                itemtype="http://schema.org/Person"
                ><span class="p-author h-card" itemprop="name"
                  >Ilya Buziuk</span
                ></span
              >
            </p>
          </header>

          <div class="post-content e-content" itemprop="articleBody">
            <div class="sect1">
              <h2 id="_introduction">Introduction</h2>
              <div class="sectionbody">
                <div class="paragraph">
                  <p>
                    Last year, the
                    <a href="https://youtu.be/eIOZq_e-Fjs?si=lecaEpLC5vEb0-Za"
                      >"Pros and cons of using Kubernetes as a development
                      platform"</a
                    >
                    session was presented at
                    <a href="https://www.eclipse.org/events/2023/eclipsecon/"
                      >EclipseCon</a
                    >
                    in Ludwigsburg. The main message was that, indeed,
                    <a href="https://kubernetes.io/">Kubernetes</a> is complex
                    and sometimes there are caveats and tradeoffs to make, but
                    it is evolving rapidly with plenty of new features and
                    opportunities available with every release. Today it is time
                    to reflect a bit more on this topic.
                  </p>
                </div>
              </div>
            </div>
            <div class="sect1">
              <h2 id="_building-an-application-platform-for-developers">
                Building an application platform for developers
              </h2>
              <div class="sectionbody">
                <div class="paragraph">
                  <p>
                    If you are considering building your own development
                    platform it is recommended to read the brilliant
                    <a
                      href="https://www.oreilly.com/library/view/production-kubernetes/9781492092292/"
                      >“Production Kubernetes”</a
                    >
                    book, where a multitude of potential options are described
                    in great detail:
                  </p>
                </div>
                <div class="imageblock">
                  <div class="content">
                    <img
                      src="/assets/img/in-kubernetes-we-trust/multitude-of-options-available-to-provide-an-application-platform-to-developers.png"
                      alt="The multitude of options available to provide an application platform to developers"
                    />
                  </div>
                </div>
                <div class="paragraph">
                  <p>
                    Figure 1: The multitude of options available to provide an
                    application platform to developers.
                  </p>
                </div>
                <div class="paragraph">
                  <p>
                    Of course, you can always craft your own platform from
                    scratch or even decide that the
                    <a
                      href="https://world.hey.com/dhh/why-we-re-leaving-the-cloud-654b47e0"
                      >cloud</a
                    >, in general, is not your cup of tea and stop the Cloud
                    Development Environment (CDE) journey right here since local
                    development is good enough for your use-case and works “just
                    fine”. Nevertheless, in
                    <a href="https://eclipse.dev/che/">Eclipse Che</a> we
                    strongly believe in the hybrid cloud strategy, and that
                    Kubernetes is one of the best possible options for building
                    a modern CDE platform for developers because of:
                  </p>
                </div>
                <div class="ulist">
                  <ul>
                    <li>
                      <p>Extensibility</p>
                    </li>
                    <li>
                      <p>Scalability</p>
                    </li>
                    <li>
                      <p>Resource Efficiency</p>
                    </li>
                    <li>
                      <p>Consistency</p>
                    </li>
                    <li>
                      <p>High Availability</p>
                    </li>
                    <li>
                      <p>Control</p>
                    </li>
                    <li>
                      <p>Open Source</p>
                    </li>
                    <li>
                      <p>Community</p>
                    </li>
                    <li>
                      <p>Vendor Neutrality</p>
                    </li>
                    <li>
                      <p>Hybrid-Cloud Nature</p>
                    </li>
                  </ul>
                </div>
                <div class="paragraph">
                  <p>
                    However, there are a lot of subtle details worth considering
                    when using Kubernetes as the pillar for building an
                    application platform for developers. Some of them are
                    described in the dedicated
                    <a href="https://youtu.be/eIOZq_e-Fjs?si=w6_Nx-v4nwg85QgP"
                      >EclipseCon session</a
                    >
                    mentioned in the introduction:
                  </p>
                </div>
                <div class="ulist">
                  <ul>
                    <li>
                      <p>Networking</p>
                    </li>
                    <li>
                      <p>Storage</p>
                    </li>
                    <li>
                      <p>Immutability</p>
                    </li>
                    <li>
                      <p>Permissions</p>
                    </li>
                    <li>
                      <p>CPU Throttling</p>
                    </li>
                    <li>
                      <p>OOM Kill</p>
                    </li>
                    <li>
                      <p>Image Pulling</p>
                    </li>
                    <li>
                      <p>Image Building</p>
                    </li>
                  </ul>
                </div>
                <div class="paragraph">
                  <p>In this article you can find a few more.</p>
                </div>
                <div class="sect2">
                  <h3 id="_namespaces">Namespaces</h3>
                  <div class="paragraph">
                    <p>
                      While there is no strict limit on the number of namespaces
                      in a Kubernetes cluster, having more than 10,000 is
                      generally not recommended due to potential performance and
                      management overhead. In Eclipse Che for instance, each
                      user is allocated a namespace. If you expect the user base
                      to be large, consider spreading workloads across multiple
                      clusters and potentially leveraging solutions for
                      multi-cluster orchestration.
                    </p>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_gitops">GitOps</h3>
                  <div class="paragraph">
                    <p>
                      Do NOT manage the Kubernetes clusters manually otherwise
                      you will end up with a snowflake environment. Application
                      definitions, configurations, and environments should be
                      declarative and version controlled. Application deployment
                      and lifecycle management should be automated, auditable,
                      and easy to understand. Using a GitOps CD solution for
                      Kubernetes such as
                      <a href="https://argo-cd.readthedocs.io/">Argo CD</a> is a
                      must-have when managing a complex application platform for
                      developers.
                    </p>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_root-access">Root Access</h3>
                  <div class="paragraph">
                    <p>
                      Containers running as root on a cluster are a major
                      security risk since they significantly increase the attack
                      surface, potentially allowing root access over the host
                      node. That is the main reason why the containers on
                      <a
                        href="https://www.redhat.com/en/technologies/cloud-computing/openshift"
                        >OpenShift</a
                      >
                      are running using
                      <a
                        href="https://cookbook.openshift.org/users-and-role-based-access-control/why-do-my-applications-run-as-a-random-user-id.html"
                        >Arbitrary User IDs</a
                      >
                      by default. This approach provides additional security
                      against processes escaping the container due to a
                      container engine vulnerability, thereby achieving
                      escalated permissions on the host node. This basic
                      principle applies to CDEs as well. It might look like a
                      trade-off between security and usability, when users
                      cannot easily install OS-scoped packages in the runtime.
                      However, dynamically installing packages in a running
                      workspace is an anti-pattern - containers are supposed to
                      be immutable, and installing anything inside a running
                      container is not recommended since all the packages will
                      vanish after the restart. There is also the added benefit
                      of maintaining workspace consistency across different
                      users by adhering to the immutable principle for container
                      images used in the CDE.
                    </p>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_emptydir-volumes">emptyDir Volumes</h3>
                  <div class="paragraph">
                    <p>
                      Volume mounting could be by far the most time-consuming
                      operation during pod startup. Consider leveraging
                      ephemeral workloads whenever relevant which are using
                      <a
                        href="https://kubernetes.io/docs/concepts/storage/volumes/#emptydir"
                        >emptyDir</a
                      >
                      volumes under the hood. In the context of Eclipse Che,
                      those are ephemeral workspaces that could be particularly
                      useful for developer routines like code review, with the
                      dedicated storage type defined on the
                      <a href="https://devfile.io/">devfile</a> level:
                    </p>
                  </div>
                  <div class="literalblock">
                    <div class="content">
                      <pre>
schemaVersion: 2.3.0
metadata:
  generateName: quarkus-api-example
attributes:
  controller.devfile.io/storage-type: ephemeral</pre
                      >
                    </div>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_autoscaling">Autoscaling</h3>
                  <div class="paragraph">
                    <p>
                      Although autoscaling is a powerful Kubernetes feature, you
                      cannot always fall back on it, and should always consider
                      predictive scaling by analyzing the load data on your
                      environment to detect daily or weekly usage patterns. If
                      your workloads follow some pattern, e.g. there are huge
                      spikes based on the time of the day, you should consider
                      provisioning worker nodes in advance (e.g. a lot of users
                      turn on their smart speakers in the morning between 7 - 9
                      am, and there is a huge spike in the requests that on the
                      infrastructure level is predicted and handled in advance).
                    </p>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_cpu-limits">CPU Limits</h3>
                  <div class="paragraph">
                    <p>
                      Setting CPU Limits in general is a contended topic for
                      production workloads, since If you apply them the
                      workloads are throttled by definition. Limits for CPU for
                      soft-tenancy pods are probably not going to be helpful
                      unless you are approaching very dense setups (&gt; 10 pods
                      per core) - otherwise, you will waste more CPU by
                      throttling than you save. CPU Limits definitely increase
                      tail latencies for most non-predictable workloads (almost
                      all request-driven use cases) in a way that will result in
                      a worse overall application environment for most users
                      most of the time (because of how limits are sliced). At
                      lower pods per core, you are almost certainly trading a
                      false security for a worse quality of service for the
                      workloads you are running on Kubernetes.
                    </p>
                  </div>
                  <div class="paragraph">
                    <p>
                      CPU Limits are most useful when dealing with bad actors on
                      your own platform, and even then, there are far more
                      effective ways of dealing with bad actors like detection
                      and account blocking. However, in the case of CDEs, you
                      may consider applying the limits on the namespace level to
                      prevent developers from accidentally saturating a compute
                      node. If you apply limits, you must make sure the limits
                      are high enough to allow normal bursts of CPU usage during
                      the inner-loop activities. Otherwise, developers may
                      experience unexpected performance issues during
                      CPU-intensive activities.
                    </p>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_ephemeral-containers">Ephemeral Containers</h3>
                  <div class="paragraph">
                    <p>
                      <a
                        href="https://kubernetes.io/docs/concepts/workloads/pods/ephemeral-containers/"
                        >Ephemeral Containers</a
                      >
                      is a great example of how Kubernetes features are
                      providing new opportunities for building application
                      platforms for developers every release. Last year we
                      talked about Ephemeral Containers at EclipseCon as a
                      potential new opportunity for Cloud Development
                      Environments. This year a
                      <a href="https://github.com/devfile/kubectl-debug-ide"
                        >kubectl plugin</a
                      >
                      for debugging Kubernetes pods from a CDE, rather than the
                      CLI has been presented at
                      <a href="https://youtu.be/fg57Zmm4eN4?si=8LyyRsud6lMJg59h"
                        >KubeCon</a
                      >.
                    </p>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_dynamic-resource-allocation-dra">
                    Dynamic Resource Allocation (DRA)
                  </h3>
                  <div class="paragraph">
                    <p>
                      <a
                        href="https://kubernetes.io/docs/concepts/scheduling-eviction/dynamic-resource-allocation/"
                        >Dynamic Resource Allocation (DRA)</a
                      >
                      is yet another striking example of how Kubernetes features
                      are providing new opportunities for developers with every
                      release. With the push for GPU-centric applications, DRA
                      was presented all throughout the last
                      <a
                        href="https://notes.elmiko.dev/2024/11/19/kubecon-na-2024-retrospective.html"
                        >KubeCon North America 2024</a
                      >. It speaks to the popularity of AI-related workloads
                      that require specific resources, and while today DRA
                      mostly targets GPUs, it is very well possible that one day
                      we will be talking about DRA for everything from CPUs and
                      memory to customized hardware accelerators in the future.
                    </p>
                  </div>
                </div>
                <div class="sect2">
                  <h3 id="_release-notes">Release Notes</h3>
                  <div class="paragraph">
                    <p>
                      To maximize the potential of your Kubernetes-based
                      developer platform, consistently review the
                      <a href="https://kubernetes.io/releases/notes/"
                        >Release Notes</a
                      >. They offer a treasury of opportunities for innovative
                      features, performance enhancements, optimizations,
                      recommended configurations, best practices, and strategic
                      planning based on future roadmap insights.
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="sect1">
              <h2 id="_adoption">Adoption</h2>
              <div class="sectionbody">
                <div class="paragraph">
                  <p>
                    For the last few years, we have seen a spike in the adoption
                    of <a href="https://eclipse.dev/che/">Eclipse Che</a> and
                    the downstream product
                    <a
                      href="https://developers.redhat.com/products/openshift-dev-spaces"
                      >Red Hat OpenShift Dev Spaces</a
                    >
                    built on top of it. Multiple success stories when the
                    Kubernetes-based platform for provisioning CDEs to
                    enterprise teams is deployed across public, private, and
                    hybrid environments motivate and encourage us every day.
                    Here are just a few public references:
                  </p>
                </div>
                <div class="ulist">
                  <ul>
                    <li>
                      <p>
                        EPAM Systems deploys Eclipse Che on
                        <a
                          href="https://che.eclipseprojects.io/2022/07/25/@karatkep-installing-eclipse-che-on-aks.html"
                          >Azure Kubernetes Service (AKS)</a
                        >.
                      </p>
                    </li>
                    <li>
                      <p>
                        <a href="https://www.youtube.com/watch?v=NYCFzNDdXTk"
                          >Ford Motor Company</a
                        >
                        uses fit-for-purpose OpenShift clusters and a dedicated
                        Kubernetes Operator for managing CDEs.
                      </p>
                    </li>
                    <li>
                      <p>
                        <a
                          href="https://www.redhat.com/en/success-stories/capgemini"
                          >Capgemini</a
                        >
                        accelerates digital service development for the Federal
                        Information Technology Center (ITZBund) using Red Hat
                        OpenShift Dev Spaces Operator in combination with
                        <a
                          href="https://docs.nvidia.com/datacenter/cloud-native/gpu-operator/latest/index.html"
                          >NVIDIA vGPU Operator</a
                        >
                        for managing CDEs in the 100% air-gapped environment,
                        isolated from the internet.
                      </p>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="sect1">
              <h2 id="_conclusion">Conclusion</h2>
              <div class="sectionbody">
                <div class="paragraph">
                  <p>
                    We trust in Kubernetes and do believe in the hybrid cloud.
                    Open Source is in our DNA.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <a
            class="u-url"
            href="/2024/11/26/@ilya.buziuk-in-kubernetes-we-trust.html"
            hidden
          ></a>
        </article>
      </div>
    </main>
    <footer class="site-footer h-card">
      <data class="u-url" href="/"></data>

      <div class="wrapper">
        <h2 class="footer-heading">Eclipse Che Blog</h2>

        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <ul class="contact-list">
              <li class="p-name">Eclipse Che Blog</li>
              <li>
                <a class="u-email" href="mailto:che-dev@eclipse.org"
                  >che-dev@eclipse.org</a
                >
              </li>
            </ul>
          </div>

          <div class="footer-col footer-col-2">
            <ul class="social-media-list">
              <li>
                <a href="https://github.com/eclipse-che"
                  ><svg class="svg-icon">
                    <use
                      xlink:href="/assets/minima-social-icons.svg#github"
                    ></use>
                  </svg>
                  <span class="username">eclipse-che</span></a
                >
              </li>
              <li>
                <a href="https://www.twitter.com/eclipse_che"
                  ><svg class="svg-icon">
                    <use
                      xlink:href="/assets/minima-social-icons.svg#twitter"
                    ></use>
                  </svg>
                  <span class="username">eclipse_che</span></a
                >
              </li>
            </ul>
          </div>

          <div class="footer-col footer-col-3">
            <p>Eclipse Che runs IDEs in Kubernetes.</p>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
