<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>
      Configuring Granular Access for Eclipse Che Authorized Users | Eclipse Che
      Blog
    </title>
    <meta name="generator" content="Jekyll v4.2.2" />
    <meta
      property="og:title"
      content="Configuring Granular Access for Eclipse Che Authorized Users"
    />
    <meta name="author" content="Ilya Buziuk" />
    <meta property="og:locale" content="en_US" />
    <meta
      name="description"
      content="The article describes how to configure advanced authorization in Eclipse Che"
    />
    <meta
      property="og:description"
      content="The article describes how to configure advanced authorization in Eclipse Che"
    />
    <link
      rel="canonical"
      href="https://che.eclipseprojects.io/2024/01/29/@ilya.buziuk-advanced-authorization.html"
    />
    <meta
      property="og:url"
      content="https://che.eclipseprojects.io/2024/01/29/@ilya.buziuk-advanced-authorization.html"
    />
    <meta property="og:site_name" content="Eclipse Che Blog" />
    <meta property="og:type" content="article" />
    <meta
      property="article:published_time"
      content="2024-01-29T00:00:00+00:00"
    />
    <meta name="twitter:card" content="summary" />
    <meta
      property="twitter:title"
      content="Configuring Granular Access for Eclipse Che Authorized Users"
    />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": { "@type": "Person", "name": "Ilya Buziuk" },
        "dateModified": "2024-01-29T00:00:00+00:00",
        "datePublished": "2024-01-29T00:00:00+00:00",
        "description": "The article describes how to configure advanced authorization in Eclipse Che",
        "headline": "Configuring Granular Access for Eclipse Che Authorized Users",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://che.eclipseprojects.io/2024/01/29/@ilya.buziuk-advanced-authorization.html"
        },
        "url": "https://che.eclipseprojects.io/2024/01/29/@ilya.buziuk-advanced-authorization.html"
      }
    </script>
    <!-- End Jekyll SEO tag -->
    <link rel="stylesheet" href="/assets/main.css" />
    <link
      type="application/atom+xml"
      rel="alternate"
      href="https://che.eclipseprojects.io/feed.xml"
      title="Eclipse Che Blog"
    />
    <script>
      if (
        !(
          window.doNotTrack === "1" ||
          navigator.doNotTrack === "1" ||
          navigator.doNotTrack === "yes" ||
          navigator.msDoNotTrack === "1"
        )
      ) {
        (function (i, s, o, g, r, a, m) {
          i["GoogleAnalyticsObject"] = r;
          (i[r] =
            i[r] ||
            function () {
              (i[r].q = i[r].q || []).push(arguments);
            }),
            (i[r].l = 1 * new Date());
          (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m);
        })(
          window,
          document,
          "script",
          "https://www.google-analytics.com/analytics.js",
          "ga"
        );

        ga("create", "UA-215676970-1", "auto");
        ga("send", "pageview");
      }
    </script>
  </head>
  <body>
    <header class="site-header" role="banner">
      <div class="wrapper">
        <a class="site-title" rel="author" href="/">Eclipse Che Blog</a>
        <nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path
                  d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"
                />
              </svg>
            </span>
          </label>

          <div class="trigger"></div>
        </nav>
      </div>
    </header>
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article
          class="post h-entry"
          itemscope
          itemtype="http://schema.org/BlogPosting"
        >
          <header class="post-header">
            <h1 class="post-title p-name" itemprop="name headline">
              Configuring Granular Access for Eclipse Che Authorized Users
            </h1>
            <p class="post-meta">
              <time
                class="dt-published"
                datetime="2024-01-29T00:00:00+00:00"
                itemprop="datePublished"
                >Jan 29, 2024 </time
              >â€¢
              <span
                itemprop="author"
                itemscope
                itemtype="http://schema.org/Person"
                ><span class="p-author h-card" itemprop="name"
                  >Ilya Buziuk</span
                ></span
              >
            </p>
          </header>

          <div class="post-content e-content" itemprop="articleBody">
            <div class="paragraph">
              <p>
                Even though the current trend is to split an infrastructure into
                a number of 'Fit For Purpose' clusters instead of having a
                gigantic monolith Kubernetes cluster, administrators still want
                to provide granular access and restrict certain functionality
                for particular users.
              </p>
            </div>
            <div class="admonitionblock note">
              <table>
                <tr>
                  <td class="icon">
                    <div class="title">Note</div>
                  </td>
                  <td class="content">
                    A 'Fit For Purpose' Kubernetes cluster refers to a cluster
                    that is specifically designed and configured to meet the
                    requirements and goals of a particular use case or workload,
                    tailored to optimize performance, resource utilization, and
                    other factors based on the characteristics of the workloads
                    it will be managing. For Eclipse&#160;Che it is recommended
                    to have this type of cluster provisioned.
                  </td>
                </tr>
              </table>
            </div>
            <div class="paragraph">
              <p>
                Previously, all users provisioned on a Kubernetes cluster had
                access to Eclipse&#160;Che, and it was difficult to restrict the
                usage for certain accounts. One of the options for
                administrators was to remove permissions for namespace / project
                creation on the Kubernetes level, and disable automatic
                namespace provisioning for Eclipse&#160;Che:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre
                  class="rouge highlight"
                  style="color: #f8f8f2; background-color: #49483e"
                ><code data-lang="yaml"><span style="color: #a6e22e">devEnvironments</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
  <span style="color: #a6e22e">defaultNamespace</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
    <span style="color: #a6e22e">autoProvision</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #66d9ef">false</span></code></pre>
              </div>
            </div>
            <div class="paragraph">
              <p>
                Considering this, new optional properties that allow setting up
                granular access for different groups and users have been added
                to the Eclipse&#160;Che Custom Resource:
                <code>allowUsers</code>, <code>allowGroups</code>,
                <code>denyUsers</code>, and <code>denyGroups</code>. Below you
                can find an illustration exemplifying the configuration:
              </p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre
                  class="rouge highlight"
                  style="color: #f8f8f2; background-color: #49483e"
                ><code data-lang="yaml"> <span style="color: #a6e22e">networking</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
    <span style="color: #a6e22e">auth</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
      <span style="color: #a6e22e">advancedAuthorization</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
        <span style="color: #a6e22e">allowUsers</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">user-a</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">user-b</span>
        <span style="color: #a6e22e">denyUsers</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">user-c</span>
        <span style="color: #a6e22e">allowGroups</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">team-a</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">team-b</span>
        <span style="color: #a6e22e">denyGroups</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">team-c</span></code></pre>
              </div>
            </div>
            <div class="admonitionblock important">
              <table>
                <tr>
                  <td class="icon">
                    <div class="title">Important</div>
                  </td>
                  <td class="content">
                    <code>AllowGroups</code> and
                    <code>DenyGroups</code> properties are only supported on
                    OpenShift.
                  </td>
                </tr>
              </table>
            </div>
            <div class="paragraph">
              <p>
                Users who are not allowed will not be able to use
                Eclipse&#160;Che and will see the following warning when trying
                to access the User Dashboard:
              </p>
            </div>
            <div class="imageblock">
              <div class="content">
                <img
                  src="/assets/img/advanced-authorization/warning.png"
                  alt="User might not be allowed warning"
                />
              </div>
            </div>
            <div class="paragraph">
              <p>&#160;<br /></p>
            </div>
            <div class="sect1">
              <h2 id="_dogfooding-in-action">Dogfooding In Action</h2>
              <div class="sectionbody">
                <div class="paragraph">
                  <p>
                    For internal development and dogfooding purposes we use an
                    <a
                      href="https://www.redhat.com/en/technologies/cloud-computing/openshift/dedicated"
                      >OpenShift Dedicated</a
                    >
                    cluster with GitHub identity provider setup. Under the
                    <code>Users</code> tab, all the accounts that have access to
                    the cluster are listed e.g.
                  </p>
                </div>
                <div class="imageblock">
                  <div class="content">
                    <img
                      src="/assets/img/advanced-authorization/user.png"
                      alt="OpenShift User"
                    />
                  </div>
                </div>
                <div class="paragraph">
                  <p>&#160;<br /></p>
                </div>
                <div class="paragraph">
                  <p>
                    There are a few teams working on Eclipse&#160;Che with the
                    corresponding OpenShift Groups created and managed on the
                    cluster:
                  </p>
                </div>
                <div class="imageblock">
                  <div class="content">
                    <img
                      src="/assets/img/advanced-authorization/groups.png"
                      alt="OpenShift Groups"
                    />
                  </div>
                </div>
                <div class="paragraph">
                  <p>&#160;<br /></p>
                </div>
                <div class="paragraph">
                  <p>
                    Each OpenShift group explicitly defines a set of users that
                    belong to it:
                  </p>
                </div>
                <div class="listingblock">
                  <div class="content">
                    <pre
                      class="rouge highlight"
                      style="color: #f8f8f2; background-color: #49483e"
                    ><code data-lang="yaml"><span style="color: #a6e22e">kind</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">Group</span>
<span style="color: #a6e22e">apiVersion</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">user.openshift.io/v1</span>
<span style="color: #a6e22e">metadata</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
  <span style="color: #a6e22e">name</span><span style="color: #f8f8f2;background-color: #49483e">:</span> <span style="color: #e6db74">che-team-a</span>
<span style="color: #a6e22e">users</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
  <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">ibuziuk</span>
  <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">...</span></code></pre>
                  </div>
                </div>
                <div class="paragraph">
                  <p>
                    The <code>advancedAuthorization</code> property of the
                    Eclipse&#160;Che Custom Resource explicitly defines the
                    groups which are allowed:
                  </p>
                </div>
                <div class="listingblock">
                  <div class="content">
                    <pre
                      class="rouge highlight"
                      style="color: #f8f8f2; background-color: #49483e"
                    ><code data-lang="yaml">  <span style="color: #a6e22e">networking</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
    <span style="color: #a6e22e">auth</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
      <span style="color: #a6e22e">advancedAuthorization</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
        <span style="color: #a6e22e">allowGroups</span><span style="color: #f8f8f2;background-color: #49483e">:</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">che-team-a</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">che-team-b</span>
          <span style="color: #f8f8f2;background-color: #49483e">-</span> <span style="color: #e6db74">che-docs</span></code></pre>
                  </div>
                </div>
                <div class="paragraph">
                  <p>
                    Users who do not belong to the groups from the list above
                    are not allowed to use Eclipse&#160;Che. This configuration
                    allows the cluster administrator to explicitly manage the
                    onboarding and curate the access.
                  </p>
                </div>
              </div>
            </div>
            <div class="sect1">
              <h2 id="_conclusion">Conclusion</h2>
              <div class="sectionbody">
                <div class="paragraph">
                  <p>
                    More details about advanced authorization can be found in
                    the
                    <a
                      href="https://eclipse.dev/che/docs/stable/administration-guide/configuring-advanced-authorization/"
                      >official documentation</a
                    >. As always, we look forward to your valuable feedback,
                    comments, remarks, and proposals on this work or anything
                    else related to the project, through our
                    <a href="https://accounts.eclipse.org/mailing-list/che-dev"
                      >mailing list</a
                    >,
                    <a href="https://github.com/eclipse/che/issues">GitHub</a>,
                    or
                    <a href="https://ecd-tools.slack.com/archives/C05SD64M85R"
                      >Slack</a
                    >. &#160;<br />
                    We wish you an enjoyable and productive coding experience
                    with Eclipse&#160;Che!
                  </p>
                </div>
              </div>
            </div>
          </div>
          <a
            class="u-url"
            href="/2024/01/29/@ilya.buziuk-advanced-authorization.html"
            hidden
          ></a>
        </article>
      </div>
    </main>
    <footer class="site-footer h-card">
      <data class="u-url" href="/"></data>

      <div class="wrapper">
        <h2 class="footer-heading">Eclipse Che Blog</h2>

        <div class="footer-col-wrapper">
          <div class="footer-col footer-col-1">
            <ul class="contact-list">
              <li class="p-name">Eclipse Che Blog</li>
              <li>
                <a class="u-email" href="mailto:che-dev@eclipse.org"
                  >che-dev@eclipse.org</a
                >
              </li>
            </ul>
          </div>

          <div class="footer-col footer-col-2">
            <ul class="social-media-list">
              <li>
                <a href="https://github.com/eclipse-che"
                  ><svg class="svg-icon">
                    <use
                      xlink:href="/assets/minima-social-icons.svg#github"
                    ></use>
                  </svg>
                  <span class="username">eclipse-che</span></a
                >
              </li>
              <li>
                <a href="https://www.twitter.com/eclipse_che"
                  ><svg class="svg-icon">
                    <use
                      xlink:href="/assets/minima-social-icons.svg#twitter"
                    ></use>
                  </svg>
                  <span class="username">eclipse_che</span></a
                >
              </li>
            </ul>
          </div>

          <div class="footer-col footer-col-3">
            <p>Eclipse Che runs IDEs in Kubernetes.</p>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
